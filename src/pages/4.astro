---
import Layout from '../layouts/Layout.astro';

const packages = [
  {
    name: '@harnessgg/electron',
    bin: 'harness-electron',
    install: 'npm i -D @harnessgg/electron',
    version: '0.1.0',
    status: 'published',
    description: 'Interact with any Electron app through the Chrome DevTools Protocol. Click, type, screenshot, assert â€” all from the CLI with structured JSON output.',
    tags: ['electron', 'cdp', 'playwright', 'debugging'],
    github: 'https://github.com/harnessgg/electron',
    npm: 'https://www.npmjs.com/package/@harnessgg/electron',
    commands: ['connect', 'dom', 'click', 'type', 'screenshot', 'assert', 'evaluate', 'wait'],
  },
];

const c = (cls: string, text: string) => `<span class="${cls}">${text}</span>`;
const comment = (t: string) => c('t-comment', t);
const cmd = (t: string) => `${c('t-cmd', '$')} ${t}`;
const json = (t: string) => c('t-json', t);
const nl = '\n';

const heroTerminalHtml = [
  comment('# Your agent installs the tool'),
  cmd('npm i -D @harnessgg/electron'),
  nl,
  comment('# Then runs it like any CLI'),
  cmd('harness-electron connect --port 9222'),
  json('&#123;"ok":true,"session":"ses_a1b2","data":&#123;"target":"My Electron App"&#125;&#125;'),
  nl,
  cmd('harness-electron click --role button --name "Sign in"'),
  json('&#123;"ok":true,"session":"ses_a1b2","data":&#123;"selector":"[role=button]"&#125;&#125;'),
  nl,
  cmd('harness-electron assert --kind url --expected "/dashboard"'),
  json('&#123;"ok":true,"session":"ses_a1b2","data":&#123;"actual":"/dashboard"&#125;&#125;'),
].join('\n');

const pkgExampleHtml = [
  comment('# Connect to an Electron app (--inspect-brk or remote-debugging-port)'),
  cmd('harness-electron connect --port 9222'),
  nl,
  comment('# Inspect the DOM'),
  cmd('harness-electron dom --format summary'),
  nl,
  comment('# Interact'),
  cmd('harness-electron type --css "input[name=email]" --value "user@example.com"'),
  cmd('harness-electron click --role button --name "Sign in"'),
  nl,
  comment('# Assert and capture'),
  cmd('harness-electron assert --kind url --expected "/dashboard"'),
  cmd('harness-electron screenshot --path ./artifacts/post-login.png'),
  nl,
  comment('# All output is JSON â€” pipe it, parse it, react to it'),
  cmd("harness-electron dom --format summary | jq '.data.elements'"),
].join('\n');
---

<Layout>
  <div class="chill-theme">
    <div class="bg-gradient"></div>
    
    <nav>
      <div class="container nav-inner">
        <a class="logo" href="/">harness<span class="dot">.</span>gg</a>
        <div class="links">
          <a href="#packages">Packages</a>
          <a href="/llms.txt">llms.txt</a>
          <a href="https://github.com/harnessgg" class="github-link">GitHub</a>
        </div>
      </div>
    </nav>

    <main>
      <section class="hero">
        <div class="container">
          <div class="hero-content">
            <div class="pill">v0.1.0 Available</div>
            <h1>Give AI agents <span class="highlight">hands</span>.</h1>
            <p class="subtitle">
              Open-source CLI packages for autonomous interaction. 
              No servers. No setup. Just simple, calm execution.
            </p>
            
            <div class="actions">
              <a href="#packages" class="btn-primary">Browse Packages</a>
              <a href="/llms.txt" class="btn-secondary">Read llms.txt</a>
            </div>
          </div>

          <div class="terminal-window">
            <div class="window-header">
              <div class="dots">
                <span></span><span></span><span></span>
              </div>
              <div class="title">terminal â€” zsh</div>
            </div>
            <pre class="terminal-body" set:html={heroTerminalHtml}></pre>
          </div>
        </div>
      </section>

      <section class="features">
        <div class="container">
          <div class="feature-card">
            <div class="icon">âœ¨</div>
            <h3>Zero Config</h3>
            <p>No daemons or complex setups. Just install and run immediately.</p>
          </div>
          <div class="feature-card">
            <div class="icon">ðŸ”®</div>
            <h3>Interactive</h3>
            <p>Click, type, and verify state with simple CLI commands.</p>
          </div>
          <div class="feature-card">
            <div class="icon">ðŸŒŠ</div>
            <h3>JSON Flow</h3>
            <p>Structured output designed for machine consumption.</p>
          </div>
        </div>
      </section>

      <section class="packages" id="packages">
        <div class="container">
          <h2 class="section-title">Packages</h2>

          {packages.map(pkg => (
            <div class="pkg-card">
              <div class="pkg-header">
                <div>
                  <h3>{pkg.name}</h3>
                  <span class="version">v{pkg.version}</span>
                </div>
                <div class="status-badge">Published</div>
              </div>
              
              <p class="description">{pkg.description}</p>
              
              <div class="install-bar">
                <code>{pkg.install}</code>
                <button class="copy-btn" data-copy={pkg.install}>Copy</button>
              </div>

              <div class="code-preview">
                <pre set:html={pkgExampleHtml}></pre>
              </div>
            </div>
          ))}
        </div>
      </section>
    </main>
  </div>
</Layout>

<script>
  document.querySelectorAll('.copy-btn').forEach(el => {
    const btn = /** @type {HTMLButtonElement} */ (el);
    btn.addEventListener('click', () => {
      const text = btn.dataset['copy'] || '';
      navigator.clipboard.writeText(text).then(() => {
        const orig = btn.textContent;
        btn.textContent = 'Copied!';
        setTimeout(() => {
          btn.textContent = orig;
        }, 2000);
      });
    });
  });
</script>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap');

  .chill-theme {
    --bg-dark: #0f172a;
    --bg-light: #1e293b;
    --accent: #818cf8;
    --accent-glow: rgba(129, 140, 248, 0.2);
    --text: #f1f5f9;
    --text-muted: #94a3b8;
    --card-bg: rgba(30, 41, 59, 0.7);
    --border: rgba(148, 163, 184, 0.1);
    
    background-color: var(--bg-dark);
    color: var(--text);
    font-family: 'Nunito', sans-serif;
    min-height: 100vh;
    position: relative;
    overflow-x: hidden;
  }

  .bg-gradient {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: 
      radial-gradient(circle at 15% 50%, rgba(76, 29, 149, 0.15), transparent 25%),
      radial-gradient(circle at 85% 30%, rgba(56, 189, 248, 0.15), transparent 25%);
    pointer-events: none;
    z-index: 0;
  }

  .container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 0 24px;
    position: relative;
    z-index: 1;
  }

  /* Nav */
  nav {
    padding: 30px 0;
    backdrop-filter: blur(10px);
    position: sticky;
    top: 0;
    z-index: 100;
  }
  .nav-inner {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .logo {
    font-size: 1.5rem;
    font-weight: 800;
    color: var(--text);
    text-decoration: none;
    letter-spacing: -0.02em;
  }
  .dot { color: var(--accent); }
  .links { display: flex; gap: 30px; align-items: center; }
  .links a {
    color: var(--text-muted);
    text-decoration: none;
    font-weight: 600;
    transition: color 0.2s;
  }
  .links a:hover { color: var(--text); }
  .github-link {
    background: rgba(255,255,255,0.1);
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 0.9rem;
  }
  .github-link:hover { background: rgba(255,255,255,0.2); }

  /* Hero */
  .hero {
    padding: 80px 0 100px;
    text-align: center;
  }
  .pill {
    display: inline-block;
    background: rgba(129, 140, 248, 0.1);
    color: var(--accent);
    padding: 6px 16px;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 700;
    margin-bottom: 24px;
    border: 1px solid rgba(129, 140, 248, 0.2);
  }
  h1 {
    font-size: 4rem;
    line-height: 1.1;
    margin-bottom: 24px;
    font-weight: 800;
  }
  .highlight {
    background: linear-gradient(120deg, #818cf8, #38bdf8);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  .subtitle {
    font-size: 1.25rem;
    color: var(--text-muted);
    max-width: 600px;
    margin: 0 auto 40px;
    line-height: 1.6;
  }
  .actions {
    display: flex;
    justify-content: center;
    gap: 16px;
    margin-bottom: 60px;
  }
  .btn-primary {
    background: var(--accent);
    color: #fff;
    padding: 12px 28px;
    border-radius: 12px;
    font-weight: 700;
    text-decoration: none;
    transition: transform 0.2s, box-shadow 0.2s;
    box-shadow: 0 4px 20px var(--accent-glow);
  }
  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px var(--accent-glow);
  }
  .btn-secondary {
    background: rgba(255,255,255,0.05);
    color: var(--text);
    padding: 12px 28px;
    border-radius: 12px;
    font-weight: 700;
    text-decoration: none;
    transition: background 0.2s;
    border: 1px solid var(--border);
  }
  .btn-secondary:hover { background: rgba(255,255,255,0.1); }

  /* Terminal */
  .terminal-window {
    background: #1e1e1e;
    border-radius: 16px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.3);
    overflow: hidden;
    text-align: left;
    max-width: 800px;
    margin: 0 auto;
    border: 1px solid var(--border);
  }
  .window-header {
    background: #2d2d2d;
    padding: 12px 16px;
    display: flex;
    align-items: center;
    position: relative;
  }
  .dots { display: flex; gap: 6px; }
  .dots span {
    width: 10px; height: 10px;
    border-radius: 50%;
    background: #4b4b4b;
  }
  .dots span:nth-child(1) { background: #ff5f56; }
  .dots span:nth-child(2) { background: #ffbd2e; }
  .dots span:nth-child(3) { background: #27c93f; }
  .title {
    position: absolute;
    left: 0; right: 0;
    text-align: center;
    font-size: 0.8rem;
    color: #888;
    font-family: monospace;
  }
  .terminal-body {
    padding: 24px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.9rem;
    line-height: 1.7;
    color: #e5e5e5;
    overflow-x: auto;
  }
  .t-comment { color: #6b7280; font-style: italic; }
  .t-cmd { color: #818cf8; }
  .t-json { color: #a5b4fc; }

  /* Features */
  .features { padding: 40px 0 80px; }
  .features .container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 24px;
  }
  .feature-card {
    background: var(--card-bg);
    padding: 32px;
    border-radius: 20px;
    border: 1px solid var(--border);
    backdrop-filter: blur(12px);
    transition: transform 0.2s;
  }
  .feature-card:hover { transform: translateY(-5px); }
  .icon { font-size: 2rem; margin-bottom: 16px; }
  .feature-card h3 { font-size: 1.25rem; margin-bottom: 8px; }
  .feature-card p { color: var(--text-muted); line-height: 1.6; }

  /* Packages */
  .section-title {
    font-size: 2rem;
    font-weight: 800;
    margin-bottom: 40px;
    text-align: center;
  }
  .pkg-card {
    background: var(--card-bg);
    border-radius: 24px;
    padding: 40px;
    border: 1px solid var(--border);
    margin-bottom: 40px;
    backdrop-filter: blur(12px);
  }
  .pkg-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 20px;
  }
  .pkg-header h3 { font-size: 1.75rem; margin-bottom: 4px; }
  .version { 
    background: rgba(255,255,255,0.1); 
    padding: 2px 8px; 
    border-radius: 12px; 
    font-size: 0.8rem; 
    font-family: monospace;
  }
  .status-badge {
    background: rgba(16, 185, 129, 0.1);
    color: #34d399;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 700;
    border: 1px solid rgba(16, 185, 129, 0.2);
  }
  .description {
    font-size: 1.1rem;
    color: var(--text-muted);
    margin-bottom: 30px;
    line-height: 1.6;
    max-width: 700px;
  }
  .install-bar {
    background: rgba(0,0,0,0.3);
    padding: 16px 24px;
    border-radius: 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    border: 1px solid var(--border);
  }
  .install-bar code { font-family: monospace; color: var(--accent); }
  .copy-btn {
    background: rgba(255,255,255,0.1);
    border: none;
    color: var(--text);
    padding: 6px 12px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.85rem;
    transition: background 0.2s;
  }
  .copy-btn:hover { background: rgba(255,255,255,0.2); }
  .code-preview {
    background: #111;
    border-radius: 12px;
    padding: 24px;
    overflow-x: auto;
    border: 1px solid var(--border);
  }

  @media (max-width: 768px) {
    h1 { font-size: 2.5rem; }
    .hero { padding: 40px 0 60px; }
    .pkg-header { flex-direction: column; gap: 12px; }
  }
</style>
